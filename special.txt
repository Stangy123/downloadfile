let intervalId1; // Variable to store the interval ID for stopping.
let lastShiftTime = 0; // Time of the last SHIFT key press
let doubleTapThreshold = 500; // Maximum time in milliseconds between two SHIFT presses to be considered a double-tap

// Function to start the auto-clicking for Button 1 only
function startAutoClick() {
    if (!intervalId1) { // Ensure that we don't start multiple intervals
        // Start clicking the first button every 700ms
        intervalId1 = setInterval(function() {
            var button1 = document.querySelector('.el-button.el-button--primary.el-button--small.search-btn');
            if (button1) {
                button1.click();
            }
        }, 700);

        console.log("Auto-clicking started for Button 1.");
    } else {
        console.log("Auto-clicking is already running.");
    }
}

// Function to stop the auto-clicking
function stopAutoClick() {
    if (intervalId1) {
        clearInterval(intervalId1); // Stop the first interval
        intervalId1 = null;
        console.log("Auto-clicking stopped.");
    }
}

// Function to handle SHIFT key press events
function handleShiftKeyPress(event) {
    const currentTime = new Date().getTime();

    // Check if the SHIFT key was pressed
    if (event.key === "Shift") {
        if (currentTime - lastShiftTime < doubleTapThreshold) {
            // If the SHIFT key is pressed twice within the threshold, toggle auto-clicking
            if (intervalId1) {
                stopAutoClick(); // If already running, stop the auto-clicking
            } else {
                startAutoClick(); // If not running, start the auto-clicking
            }
        }
        lastShiftTime = currentTime;
    }
}

// Add event listener for keydown event
document.addEventListener("keydown", handleShiftKeyPress);

console.log("Double-tap SHIFT key to start/stop auto-clicking for Button 1.");